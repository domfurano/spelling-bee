{"id":"../node_modules/@mesa-engine/core/lib/engine.js","dependencies":[{"name":"/Users/z002m1n/PersonalProjects/spelling-bee/node_modules/@mesa-engine/core/lib/engine.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Users/z002m1n/PersonalProjects/spelling-bee/package.json","includedInParent":true,"mtime":1570033957589},{"name":"/Users/z002m1n/PersonalProjects/spelling-bee/node_modules/@mesa-engine/core/package.json","includedInParent":true,"mtime":1570055500767},{"name":"./entity","loc":{"line":3,"column":23},"parent":"/Users/z002m1n/PersonalProjects/spelling-bee/node_modules/@mesa-engine/core/lib/engine.js","resolved":"/Users/z002m1n/PersonalProjects/spelling-bee/node_modules/@mesa-engine/core/lib/entity.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar entity_1 = require(\"./entity\");\nvar Engine = (function () {\n    function Engine() {\n        this._entities = [];\n        this._entityListeners = [];\n        this._systems = [];\n        this._systemsNeedSorting = false;\n    }\n    Engine.prototype.buildEntity = function (blueprintClass) {\n        return this.getEntityFromBlueprint(new blueprintClass(), new entity_1.Entity());\n    };\n    Engine.prototype.getEntityFromBlueprint = function (blueprint, entity) {\n        var _this = this;\n        if (blueprint.blueprints) {\n            blueprint.blueprints.forEach(function (inheritedBlueprint) {\n                entity = _this.getEntityFromBlueprint(inheritedBlueprint, entity);\n            });\n        }\n        blueprint.components.forEach(function (x) {\n            entity.putComponent(x.component);\n            if (x.value) {\n                Object.assign(entity.getComponent(x.component), x.value);\n            }\n        });\n        return entity;\n    };\n    Object.defineProperty(Engine.prototype, \"entities\", {\n        get: function () {\n            return Object.freeze(this._entities.slice(0));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Engine.prototype.notifyPriorityChange = function (system) {\n        this._systemsNeedSorting = true;\n    };\n    Engine.prototype.addEntityListener = function (listener) {\n        if (this._entityListeners.indexOf(listener) === -1) {\n            this._entityListeners.push(listener);\n        }\n        return this;\n    };\n    Engine.prototype.removeEntityListener = function (listener) {\n        var index = this._entityListeners.indexOf(listener);\n        if (index !== -1) {\n            this._entityListeners.splice(index, 1);\n        }\n        return this;\n    };\n    Engine.prototype.addEntity = function (entity) {\n        if (this._entities.indexOf(entity) === -1) {\n            this._entities.push(entity);\n            for (var _i = 0, _a = this._entityListeners; _i < _a.length; _i++) {\n                var listener = _a[_i];\n                listener.onEntityAdded(entity);\n            }\n        }\n        return this;\n    };\n    Engine.prototype.addEntities = function () {\n        var entities = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            entities[_i] = arguments[_i];\n        }\n        for (var _a = 0, entities_1 = entities; _a < entities_1.length; _a++) {\n            var entity = entities_1[_a];\n            this.addEntity(entity);\n        }\n        return this;\n    };\n    Engine.prototype.removeEntity = function (entity) {\n        var index = this._entities.indexOf(entity);\n        if (index !== -1) {\n            this._entities.splice(index, 1);\n            for (var _i = 0, _a = this._entityListeners; _i < _a.length; _i++) {\n                var listener = _a[_i];\n                listener.onEntityRemoved(entity);\n            }\n        }\n    };\n    Engine.prototype.removeEntities = function () {\n        var entities = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            entities[_i] = arguments[_i];\n        }\n        for (var _a = 0, entities_2 = entities; _a < entities_2.length; _a++) {\n            var entity = entities_2[_a];\n            this.removeEntity(entity);\n        }\n        return this;\n    };\n    Engine.prototype.addSystem = function (system) {\n        var index = this._systems.indexOf(system);\n        if (index === -1) {\n            this._systems.push(system);\n            system.onAttach(this);\n            this._systemsNeedSorting = true;\n        }\n        return this;\n    };\n    Engine.prototype.addSystems = function () {\n        var systems = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            systems[_i] = arguments[_i];\n        }\n        for (var _a = 0, systems_1 = systems; _a < systems_1.length; _a++) {\n            var system = systems_1[_a];\n            this.addSystem(system);\n        }\n    };\n    Engine.prototype.removeSystem = function (system) {\n        var index = this._systems.indexOf(system);\n        if (index !== -1) {\n            this._systems.splice(index, 1);\n            system.onDetach(this);\n        }\n        return this;\n    };\n    Engine.prototype.removeSystems = function () {\n        var systems = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            systems[_i] = arguments[_i];\n        }\n        for (var _a = 0, systems_2 = systems; _a < systems_2.length; _a++) {\n            var system = systems_2[_a];\n            this.removeSystem(system);\n        }\n    };\n    Engine.prototype.update = function (delta) {\n        if (this._systemsNeedSorting) {\n            this._systemsNeedSorting = false;\n            this._systems.sort(function (a, b) { return a.priority - b.priority; });\n        }\n        for (var _i = 0, _a = this._systems; _i < _a.length; _i++) {\n            var system = _a[_i];\n            system.update(this, delta);\n        }\n    };\n    return Engine;\n}());\nexports.Engine = Engine;\n"},"sourceMaps":{"js":{"version":3,"file":"engine.js","sourceRoot":"","sources":["../src/engine.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"42834ffff3fe81c40bc4e11fb80d5481","cacheData":{"env":{}}}